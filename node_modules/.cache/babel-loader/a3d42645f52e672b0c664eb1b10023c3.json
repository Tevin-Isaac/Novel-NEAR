{"ast":null,"code":"var _jsxFileName = \"/home/tevin/Documents/NEAR/Book-near/src/components/library/Books.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport AddBook from \"./AddBook\";\nimport Book from \"./Book\";\nimport Loader from \"../utils/Loader\";\nimport { Row } from \"react-bootstrap\";\nimport { NotificationError, NotificationSuccess } from \"../utils/Notifications\";\nimport { createBook, voteBook, deleteBook, AppreciateOneNear, getBooks as getBookList } from \"../../utils/appreciate\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Books = () => {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const getBooks = useCallback(async () => {\n    try {\n      setLoading(true);\n      setBooks(await getBookList());\n    } catch (error) {\n      console.log({\n        error\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const addBook = async data => {\n    try {\n      setLoading(true);\n      createBook(data).then(() => {\n        getBooks();\n      });\n      toast( /*#__PURE__*/_jsxDEV(NotificationSuccess, {\n        text: \"Book added successfully\\uD83C\\uDF89.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 19\n      }, this));\n    } catch (error) {\n      console.log({\n        error\n      });\n      toast( /*#__PURE__*/_jsxDEV(NotificationError, {\n        text: \"Failed to create an book.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 19\n      }, this));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const Appreciate = async id => {\n    try {\n      await AppreciateOneNear(id).then(() => getBooks());\n      toast( /*#__PURE__*/_jsxDEV(NotificationSuccess, {\n        text: \"Appreciated successfully\\uD83C\\uDF89\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 19\n      }, this));\n    } catch (error) {\n      toast( /*#__PURE__*/_jsxDEV(NotificationError, {\n        text: \"Failed to Appreciate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 19\n      }, this));\n    } finally {\n      setLoading(false);\n    }\n  }; // function to vote for a book\n\n\n  const voteBookItem = async (id, voteType) => {\n    try {\n      await voteBook({\n        id,\n        voteType\n      }).then(resp => getBooks());\n      toast( /*#__PURE__*/_jsxDEV(NotificationSuccess, {\n        text: voteType == 0 ? \"Book downvoted\" : \"Book upvoted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this));\n    } catch (error) {\n      toast( /*#__PURE__*/_jsxDEV(NotificationError, {\n        text: `Sorry,  you  voted before?`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteOwnerBook = async (id, owner) => {\n    try {\n      await deleteBook(id, owner).then(() => getBooks());\n      toast( /*#__PURE__*/_jsxDEV(NotificationSuccess, {\n        text: \"Deleted successfully\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }, this));\n    } catch (error) {\n      toast( /*#__PURE__*/_jsxDEV(NotificationError, {\n        text: \"Failed to delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }, this));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getBooks().then();\n  }, [getBooks]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"fs-4 fw-bold mb-0\",\n          children: \"Best All Time Novels\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(AddBook, {\n          save: addBook\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        xs: 1,\n        sm: 2,\n        lg: 3,\n        className: \"g-3  mb-5 g-xl-4 g-xxl-5\",\n        children: books.map(_book => /*#__PURE__*/_jsxDEV(Book, {\n          book: { ..._book\n          },\n          Appreciate: Appreciate,\n          vote: voteBookItem,\n          deleteBook: deleteOwnerBook\n        }, _book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n\n_s(Books, \"as/QcJ1wSqey9Pxs9oZGFDcVDh4=\");\n\n_c = Books;\nexport default Books;\n\nvar _c;\n\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","toast","AddBook","Book","Loader","Row","NotificationError","NotificationSuccess","createBook","voteBook","deleteBook","AppreciateOneNear","getBooks","getBookList","Books","books","setBooks","loading","setLoading","error","console","log","addBook","data","then","Appreciate","id","voteBookItem","voteType","resp","deleteOwnerBook","owner","map","_book"],"sources":["/home/tevin/Documents/NEAR/Book-near/src/components/library/Books.js"],"sourcesContent":["import React, {useCallback, useEffect, useState} from \"react\";\nimport {toast} from \"react-toastify\";\nimport AddBook from \"./AddBook\";\nimport Book from \"./Book\";\nimport Loader from \"../utils/Loader\";\nimport {Row} from \"react-bootstrap\";\nimport {NotificationError, NotificationSuccess} from \"../utils/Notifications\";\nimport {createBook,voteBook, deleteBook, AppreciateOneNear, getBooks as getBookList} from \"../../utils/appreciate\";\n\nconst Books = () => {\n    const [books, setBooks] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const getBooks = useCallback(async () => {\n        try {\n            setLoading(true);\n            setBooks(await getBookList());\n        } catch (error) {\n            console.log({error});\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    const addBook = async (data) => {\n        try {\n            setLoading(true);\n            createBook(data).then(() => {\n                getBooks();\n            });\n            toast(<NotificationSuccess text=\"Book added successfullyðŸŽ‰.\"/>);\n        } catch (error) {\n            console.log({error});\n            toast(<NotificationError text=\"Failed to create an book.\"/>);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const Appreciate = async (id) => {\n        try {\n            await AppreciateOneNear(id).then(() => getBooks());\n            toast(<NotificationSuccess text=\"Appreciated successfullyðŸŽ‰\"/>);\n        } catch (error) {\n            toast(<NotificationError text=\"Failed to Appreciate\"/>);\n        } finally {\n            setLoading(false);\n        }\n    };\n     // function to vote for a book\n  const voteBookItem = async (id, voteType) => {\n    try{\n      await voteBook({\n        id, \n        voteType,\n      }).then((resp) => getBooks());\n      toast(<NotificationSuccess text= {(voteType == 0)? \"Book downvoted\" : \"Book upvoted\"} />);\n    } catch (error) {\n      toast(<NotificationError text={`Sorry,  you  voted before?`} />);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    const deleteOwnerBook = async (id, owner) => {\n        try {\n            await deleteBook(id, owner).then(() => getBooks());\n            toast(<NotificationSuccess text=\"Deleted successfully\"/>);\n        } catch (error) {\n            toast(<NotificationError text=\"Failed to delete\"/>);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        getBooks().then();\n    }, [getBooks]);\n\n    return (\n        <>\n            {!loading ? (\n                <>\n                    <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                        <h1 className=\"fs-4 fw-bold mb-0\">Best All Time Novels</h1>\n                        <AddBook save={addBook}/>\n                    </div>\n                    <Row xs={1} sm={2} lg={3} className=\"g-3  mb-5 g-xl-4 g-xxl-5\">\n                        {books.map((_book) => (\n                            <Book\n                                key={_book.id}\n                                book={{\n                                    ..._book,\n                                }}\n                                Appreciate={Appreciate}\n                                vote={voteBookItem}\n                                deleteBook={deleteOwnerBook}\n                            />\n                        ))}\n                    </Row>\n                </>\n            ) : (\n                <Loader/>\n            )}\n        </>\n    );\n};\n\nexport default Books;"],"mappings":"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"},"metadata":{},"sourceType":"module"}