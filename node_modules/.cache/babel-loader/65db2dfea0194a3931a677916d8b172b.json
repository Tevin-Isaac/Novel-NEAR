{"ast":null,"code":"import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\nimport { formatNearAmount } from \"near-api-js/lib/utils/format\";\nconst nearEnv = environment(\"testnet\");\nexport async function initializeContract() {\n  const near = await connect(Object.assign({\n    deps: {\n      keyStore: new keyStores.BrowserLocalStorageKeyStore()\n    }\n  }, nearEnv));\n  window.walletConnection = new WalletConnection(near, null);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(window.walletConnection.account(), nearEnv.contractName, {\n    viewMethods: [\"getBook\", \"getBooks\"],\n    changeMethods: [\"AppreciateOneNear\", \"setBook\", \"deleteBook\", \"resetBooks\"]\n  });\n}\nexport async function accountBalance() {\n  return formatNearAmount((await window.walletConnection.account().getAccountBalance()).total, 2);\n}\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName).then();\n}\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}","map":{"version":3,"names":["environment","connect","Contract","keyStores","WalletConnection","formatNearAmount","nearEnv","initializeContract","near","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","accountBalance","getAccountBalance","total","login","requestSignIn","then","logout","signOut","location","reload"],"sources":["/home/tevin/Documents/NEAR/Book-near/src/utils/near.js"],"sourcesContent":["import environment from \"./config\";\nimport {connect, Contract, keyStores, WalletConnection} from \"near-api-js\";\nimport {formatNearAmount} from \"near-api-js/lib/utils/format\";\n\nconst nearEnv = environment(\"testnet\");\n\nexport async function initializeContract() {\n    const near = await connect(\n        Object.assign(\n            {deps: {keyStore: new keyStores.BrowserLocalStorageKeyStore()}},\n            nearEnv\n        )\n    );\n    window.walletConnection = new WalletConnection(near, null);\n    window.accountId = window.walletConnection.getAccountId();\n    window.contract = new Contract(\n        window.walletConnection.account(),\n        nearEnv.contractName,\n        {\n            viewMethods: [\"getBook\", \"getBooks\"],\n            changeMethods: [\"AppreciateOneNear\", \"setBook\", \"deleteBook\", \"resetBooks\"],\n        }\n    );\n}\n\nexport async function accountBalance() {\n    return formatNearAmount(\n        (await window.walletConnection.account().getAccountBalance()).total,\n        2\n    );\n}\n\nexport async function getAccountId() {\n    return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n    window.walletConnection.requestSignIn(nearEnv.contractName).then();\n}\n\nexport function logout() {\n    window.walletConnection.signOut();\n    window.location.reload();\n}"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,UAAxB;AACA,SAAQC,OAAR,EAAiBC,QAAjB,EAA2BC,SAA3B,EAAsCC,gBAAtC,QAA6D,aAA7D;AACA,SAAQC,gBAAR,QAA+B,8BAA/B;AAEA,MAAMC,OAAO,GAAGN,WAAW,CAAC,SAAD,CAA3B;AAEA,OAAO,eAAeO,kBAAf,GAAoC;EACvC,MAAMC,IAAI,GAAG,MAAMP,OAAO,CACtBQ,MAAM,CAACC,MAAP,CACI;IAACC,IAAI,EAAE;MAACC,QAAQ,EAAE,IAAIT,SAAS,CAACU,2BAAd;IAAX;EAAP,CADJ,EAEIP,OAFJ,CADsB,CAA1B;EAMAQ,MAAM,CAACC,gBAAP,GAA0B,IAAIX,gBAAJ,CAAqBI,IAArB,EAA2B,IAA3B,CAA1B;EACAM,MAAM,CAACE,SAAP,GAAmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAnB;EACAH,MAAM,CAACI,QAAP,GAAkB,IAAIhB,QAAJ,CACdY,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EADc,EAEdb,OAAO,CAACc,YAFM,EAGd;IACIC,WAAW,EAAE,CAAC,SAAD,EAAY,UAAZ,CADjB;IAEIC,aAAa,EAAE,CAAC,mBAAD,EAAsB,SAAtB,EAAiC,YAAjC,EAA+C,YAA/C;EAFnB,CAHc,CAAlB;AAQH;AAED,OAAO,eAAeC,cAAf,GAAgC;EACnC,OAAOlB,gBAAgB,CACnB,CAAC,MAAMS,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,GAAkCK,iBAAlC,EAAP,EAA8DC,KAD3C,EAEnB,CAFmB,CAAvB;AAIH;AAED,OAAO,eAAeR,YAAf,GAA8B;EACjC,OAAOH,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAP;AACH;AAED,OAAO,SAASS,KAAT,GAAiB;EACpBZ,MAAM,CAACC,gBAAP,CAAwBY,aAAxB,CAAsCrB,OAAO,CAACc,YAA9C,EAA4DQ,IAA5D;AACH;AAED,OAAO,SAASC,MAAT,GAAkB;EACrBf,MAAM,CAACC,gBAAP,CAAwBe,OAAxB;EACAhB,MAAM,CAACiB,QAAP,CAAgBC,MAAhB;AACH"},"metadata":{},"sourceType":"module"}